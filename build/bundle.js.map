{"version":3,"file":"bundle.js","sources":["../src/index.js"],"sourcesContent":["export function toFunction(raw) {\r\n  return new Function('$vars', 'return ' + _renderBrackets(raw));\r\n}\r\n\r\nexport function _renderBrackets(item) {\r\n  if(typeof item == 'number') return _toNumber(item);\r\n\r\n  if('number' in item) return _toNumber(item.number);\r\n  if('formula' in item) return _renderBrackets(item.formula);\r\n  if('variable' in item) return `$vars[\"${item.variable}\"]`;\r\n  if('operator' in item) return _renderOperator(item);\r\n\r\n  throw new Error('Unexpected item');\r\n}\r\n\r\nexport function _renderOperator(item) {\r\n  if(['+', '-', '*', '/'].includes(item.operator)) {\r\n    return `(${_renderBrackets(item.first)}${item.operator}${_renderBrackets(item.second)})`;\r\n  }\r\n\r\n  if(item.operator == 'pow') {\r\n    return `Math.pow(${_renderBrackets(item.first)},${_renderBrackets(item.second)})`;\r\n  }\r\n\r\n  if(item.operator == 'sqrt') {\r\n    return `Math.sqrt(${_renderBrackets(item.first)})`;\r\n  }\r\n\r\n  throw new Error('Unexpected operator');\r\n}\r\n\r\nexport function _toNumber(a) {\r\n  a = Number(a);\r\n\r\n  if(isNaN(a)) return 0;\r\n\r\n  return a;\r\n}"],"names":["toFunction","raw","Function","_renderBrackets","item","_toNumber","number","formula","variable","_renderOperator","Error","includes","operator","first","second","a","Number","isNaN"],"mappings":";;;;AAAO,SAASA,UAAT,CAAoBC,GAApB,EAAyB;SACvB,IAAIC,QAAJ,CAAa,OAAb,EAAsB,YAAYC,gBAAgBF,GAAhB,CAAlC,CAAP;;;AAGF,AAAO,SAASE,eAAT,CAAyBC,IAAzB,EAA+B;MACjC,OAAOA,IAAP,IAAe,QAAlB,EAA4B,OAAOC,UAAUD,IAAV,CAAP;;MAEzB,YAAYA,IAAf,EAAqB,OAAOC,UAAUD,KAAKE,MAAf,CAAP;MAClB,aAAaF,IAAhB,EAAsB,OAAOD,gBAAgBC,KAAKG,OAArB,CAAP;MACnB,cAAcH,IAAjB,EAAuB,mBAAiBA,KAAKI,QAAtB;MACpB,cAAcJ,IAAjB,EAAuB,OAAOK,gBAAgBL,IAAhB,CAAP;;QAEjB,IAAIM,KAAJ,CAAU,iBAAV,CAAN;;;AAGF,AAAO,SAASD,eAAT,CAAyBL,IAAzB,EAA+B;MACjC,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqBO,QAArB,CAA8BP,KAAKQ,QAAnC,CAAH,EAAiD;iBACpCT,gBAAgBC,KAAKS,KAArB,CAAX,GAAyCT,KAAKQ,QAA9C,GAAyDT,gBAAgBC,KAAKU,MAArB,CAAzD;;;MAGCV,KAAKQ,QAAL,IAAiB,KAApB,EAA2B;yBACNT,gBAAgBC,KAAKS,KAArB,CAAnB,SAAkDV,gBAAgBC,KAAKU,MAArB,CAAlD;;;MAGCV,KAAKQ,QAAL,IAAiB,MAApB,EAA4B;0BACNT,gBAAgBC,KAAKS,KAArB,CAApB;;;QAGI,IAAIH,KAAJ,CAAU,qBAAV,CAAN;;;AAGF,AAAO,SAASL,SAAT,CAAmBU,CAAnB,EAAsB;MACvBC,OAAOD,CAAP,CAAJ;;MAEGE,MAAMF,CAAN,CAAH,EAAa,OAAO,CAAP;;SAENA,CAAP;;;;;;;;"}